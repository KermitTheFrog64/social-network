{"ast":null,"code":"import _regeneratorRuntime from\"/home/natalie/ReactProjects/01/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/natalie/ReactProjects/01/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/home/natalie/ReactProjects/01/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/natalie/ReactProjects/01/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{profileAPI}from\"../api/api.js\";var ADD_POST='ADD-POST';var SET_USER_PROFILE='SET-USER-PROFILE';var SET_STATUS='SET-STATUS';var DELETE_POST='DELETE-POST';var initialState={posts:[{id:1,message:'Hello, I\\'m Natalie',numberOfLikes:'15'},{id:2,message:'Hi! How are you?',numberOfLikes:'35'}],profile:null,status:\"\"};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:var body=action.post;return _objectSpread(_objectSpread({},state),{},{newPostText:'',posts:[].concat(_toConsumableArray(state.posts),[{id:3,message:body,numberOfLikes:'12'}])});case SET_USER_PROFILE:return _objectSpread(_objectSpread({},state),{},{profile:action.profile});case SET_STATUS:return _objectSpread(_objectSpread({},state),{},{status:action.status});case DELETE_POST:return _objectSpread(_objectSpread({},state),{},{posts:state.posts.filter(function(p){return p.id!=action.postId;})});default:return state;}};export var addPostActionCreator=function addPostActionCreator(post){return{type:ADD_POST,post:post};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var deletePost=function deletePost(postId){return{type:DELETE_POST,postId:postId};};export var getUserProfile=function getUserProfile(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return profileAPI.getProfile(userId);case 2:response=_context.sent;dispatch(setUserProfile(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getStatus=function getStatus(userId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.getStatus(userId);case 2:response=_context2.sent;dispatch(setStatus(response.data));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var updateStatus=function updateStatus(status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.updateStatus(status);case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(setStatus(status));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default profileReducer;","map":{"version":3,"names":["profileAPI","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","initialState","posts","id","message","numberOfLikes","profile","status","profileReducer","state","action","type","body","post","newPostText","filter","p","postId","addPostActionCreator","setUserProfile","setStatus","deletePost","getUserProfile","userId","dispatch","getProfile","response","data","getStatus","updateStatus","resultCode"],"sources":["/home/natalie/ReactProjects/01/my-app/src/redux/profile-reducer.js"],"sourcesContent":["import { profileAPI } from \"../api/api.js\";\n\nconst ADD_POST = 'ADD-POST';\nconst SET_USER_PROFILE = 'SET-USER-PROFILE';\nconst SET_STATUS = 'SET-STATUS';\nconst DELETE_POST = 'DELETE-POST'\n\nlet initialState = {\n    posts: [\n        { id: 1, message: 'Hello, I\\'m Natalie', numberOfLikes: '15' },\n        { id: 2, message: 'Hi! How are you?', numberOfLikes: '35' },\n    ],\n    profile: null,\n    status: \"\"\n}\n\nconst profileReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n\n        case ADD_POST:\n            let body = action.post;\n            return {\n                ...state,\n                newPostText: '',\n                posts: [...state.posts, { id: 3, message: body, numberOfLikes: '12' }]\n            }\n\n        case SET_USER_PROFILE:\n            return { ...state, profile: action.profile }\n\n        case SET_STATUS:\n            return { ...state, status: action.status }\n\n        case DELETE_POST:\n            return { ...state, posts: state.posts.filter(p => p.id != action.postId) }\n\n        default:\n            return state;\n    }\n}\n\nexport const addPostActionCreator = (post) => ({type: ADD_POST, post})\n\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile})\n\nexport const setStatus = (status) => ({type: SET_STATUS, status})\n\nexport const deletePost = (postId) => ({type: DELETE_POST, postId})\n\nexport const getUserProfile = (userId) => async (dispatch) => {\n\n    let response = await profileAPI.getProfile(userId);\n\n    dispatch(setUserProfile(response.data));\n}\n\nexport const getStatus = (userId) => async (dispatch) => {\n\n    let response = await profileAPI.getStatus(userId);\n\n    dispatch(setStatus(response.data));\n}\n\nexport const updateStatus = (status) => async (dispatch) => {\n\n    let response = await profileAPI.updateStatus(status);\n\n    if (response.data.resultCode === 0) {\n        dispatch(setStatus(status));\n    }\n}\n\nexport default profileReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}